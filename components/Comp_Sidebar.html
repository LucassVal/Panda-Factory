<!-- ============================================= -->
<!-- SIDEBAR COMPONENT (Chat/Omni-Channel) -->
<!-- Right Side/Bottom - Fixed -->
<!-- ============================================= -->
<div id="omni-channel-sidebar" class="sidebar-chat">
  <div class="sidebar-header">
    <div class="sidebar-title"><span>üêº</span> Panda AI Assistant</div>
    <div class="sidebar-controls">
      <button class="icon-btn" onclick="toggleSidebar()" title="Minimizar">
        ‚ñº
      </button>
    </div>
  </div>

  <div class="sidebar-messages" id="chat-history">
    <div class="chat-placeholder">
      <div class="placeholder-icon">üêº</div>
      <p>Ol√°! Como posso ajudar voc√™ hoje?</p>
      <div class="suggestion-chips">
        <button onclick="setInput('Criar novo cliente')">
          Criar novo cliente
        </button>
        <button onclick="setInput('Resumo financeiro')">
          Resumo financeiro
        </button>
        <button onclick="setInput('Verificar servidor')">
          Verificar servidor
        </button>
      </div>
    </div>
  </div>

  <div class="sidebar-input">
    <input
      type="text"
      id="chat-input"
      placeholder="Digite sua mensagem or /comando..."
      autocomplete="off"
    />
    <button class="send-btn" onclick="sendMessage()">
      <span>‚û§</span>
    </button>
  </div>
</div>

<style>
  /* Sidebar / Chat Styles */
  .sidebar-chat {
    position: fixed;
    bottom: 20px;
    right: 80px; /* Left of DevTools dock */
    width: 350px;
    height: 500px;
    background: var(--bg-panel);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-subtle);
    border-radius: 16px;
    box-shadow: var(--shadow-dock);
    display: flex;
    flex-direction: column;
    z-index: 4000;
    transition: all 0.3s ease;
    overflow: hidden;
  }

  .sidebar-chat.collapsed {
    height: 50px;
  }

  .sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-subtle);
    background: rgba(0, 0, 0, 0.02);
    cursor: pointer;
  }

  .sidebar-title {
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-primary);
  }

  .icon-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 12px;
  }

  .sidebar-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .chat-placeholder {
    text-align: center;
    margin-top: 40px;
    color: var(--text-secondary);
  }

  .placeholder-icon {
    font-size: 32px;
    margin-bottom: 12px;
    opacity: 0.5;
  }

  .suggestion-chips {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
  }

  .suggestion-chips button {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 11px;
    cursor: pointer;
    color: var(--text-primary);
    transition: all 0.2s;
  }

  .suggestion-chips button:hover {
    border-color: var(--text-primary);
    background: var(--bg-input);
  }

  .sidebar-input {
    padding: 12px;
    border-top: 1px solid var(--border-subtle);
    display: flex;
    gap: 8px;
    background: var(--bg-card);
  }

  .sidebar-input input {
    flex: 1;
    background: var(--bg-input);
    border: 1px solid var(--border-subtle);
    border-radius: 20px;
    padding: 8px 16px;
    color: var(--text-primary);
    outline: none;
  }

  .sidebar-input input:focus {
    border-color: var(--border-focus);
  }

  .send-btn {
    background: var(--accent-primary);
    color: var(--text-inverted);
    border: none;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

<script>
  // Sidebar Interactivity
  function toggleSidebar() {
    const sidebar = document.getElementById("omni-channel-sidebar");
    sidebar.classList.toggle("collapsed");
  }

  function setInput(text) {
    document.getElementById("chat-input").value = text;
    document.getElementById("chat-input").focus();
  }

  function sendMessage() {
    const input = document.getElementById("chat-input");
    const text = input.value.trim();
    if (!text) return;

    // Demo implementation
    const history = document.getElementById("chat-history");

    // User Message
    const userDiv = document.createElement("div");
    userDiv.style.alignSelf = "flex-end";
    userDiv.style.background = "var(--accent-primary)";
    userDiv.style.color = "var(--text-inverted)";
    userDiv.style.padding = "8px 12px";
    userDiv.style.borderRadius = "12px 12px 0 12px";
    userDiv.style.maxWidth = "80%";
    userDiv.style.fontSize = "13px";
    userDiv.textContent = text;
    history.appendChild(userDiv);

    // Clear input
    input.value = "";

    // Scroll
    history.scrollTop = history.scrollHeight;

    // Simulate Response
    setTimeout(() => {
      const botDiv = document.createElement("div");
      botDiv.style.alignSelf = "flex-start";
      botDiv.style.background = "var(--bg-card)";
      botDiv.style.border = "1px solid var(--border-subtle)";
      botDiv.style.color = "var(--text-primary)";
      botDiv.style.padding = "8px 12px";
      botDiv.style.borderRadius = "12px 12px 12px 0";
      botDiv.style.maxWidth = "80%";
      botDiv.style.fontSize = "13px";
      botDiv.innerHTML = "Estou processando sua solicita√ß√£o... (Demo)";
      history.appendChild(botDiv);
      history.scrollTop = history.scrollHeight;
    }, 1000);
  }

  document.getElementById("chat-input").addEventListener("keypress", (e) => {
    if (e.key === "Enter") sendMessage();
  });
</script>
